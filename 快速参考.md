# Little-CMS 快速参考

## 构建命令

```bash
# 构建所有平台
./scripts/build-unified.sh all

# 构建特定平台
./scripts/build-unified.sh macos-arm64
./scripts/build-unified.sh macos-x64
./scripts/build-unified.sh windows-x64
./scripts/build-unified.sh linux-x64

# 常用选项
./scripts/build-unified.sh macos-arm64 --clean --verbose
./scripts/build-unified.sh windows-x64 --shared
./scripts/build-unified.sh all --static --no-jpeg
```

## 构建输出

```
build/<平台>/install/
├── lib/liblcms2.a          # 静态库
├── lib/liblcms2.2.dylib    # 动态库 (macOS)
├── bin/transicc            # 转换工具
├── bin/linkicc             # 链接工具
├── bin/psicc               # 配置文件工具
└── include/lcms2.h         # 头文件
```

## 支持平台

- ✅ macOS ARM64 (aarch64-apple-darwin)
- ✅ macOS x64 (x86_64-apple-darwin)  
- ✅ Windows x64 (x86_64-w64-mingw32)
- ✅ Linux x64 (x86_64-linux-musl)

## 依赖要求

### 系统依赖
- **必需**: C 编译器 (GCC/Clang/MSVC)
- **可选**: libjpeg, libtiff, zlib

### 交叉编译工具链
```bash
# Windows x64
brew install mingw-w64

# Linux x64  
brew install x86_64-linux-gnu-binutils
brew install FiloSottile/musl-cross/musl-cross
```

## 故障排除

### 基本命令
```bash
# 查看帮助
./scripts/build-unified.sh --help

# 详细输出
./scripts/build-unified.sh macos-arm64 --verbose

# 清理重建
./scripts/build-unified.sh all --clean
```

### 交叉编译问题
```bash
# 检查工具链安装
x86_64-w64-mingw32-gcc --version    # Windows
x86_64-linux-musl-gcc --version     # Linux

# 重新安装工具链
brew reinstall mingw-w64
brew reinstall FiloSottile/musl-cross/musl-cross
```
